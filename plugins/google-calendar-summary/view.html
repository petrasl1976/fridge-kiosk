{% if plugin['data'] %}
  {% if plugin['data'].error %}
    <div class="calendar-widget" style="font-size: {{ plugin['config'].format.font_size }}; color: red; padding: {{ plugin['config'].format.padding }};">
      <h3>Google Calendar Error</h3>
      <p>{{ plugin['data'].error }}</p>
    </div>
  {% else %}
    <div class="calendar-widget summary-list" style="font-size: {{ plugin['config'].format.font_size }}; color: {{ plugin['config'].format.color }}; padding: {{ plugin['config'].format.padding }}; text-align: right; display: flex; flex-direction: column; align-items: flex-end;">
      {% set w = plugin['data'].weather_now %}
      <div class="summary-weather" style="margin-bottom: 10px; text-align: right;">
        <div><span>{{ w.temperature if w and w.temperature is defined else '?' }}°</span> <span>{{ w.feelsLike if w and w.feelsLike is defined else '?' }}°</span></div>
        <div><span>{{ w.windSpeed if w and w.windSpeed is defined else '?' }} m/s</span> <span>{{ w.precipitation if w and w.precipitation is defined else '?' }} mm</span></div>
        <div><span>{{ w.pressure if w and w.pressure is defined else '?' }} hPa</span> <span>{{ w.humidity if w and w.humidity is defined else '?' }}%</span></div>
        <div><span>{{ w.conditionCode if w and w.conditionCode is defined else '?' }}</span></div>
      </div>
      {% if plugin['data'].today_events %}
        <div class="summary-section" style="width: 100%;">
          <div class="summary-events-col" style="display: flex; flex-direction: column; align-items: flex-end;">
            {% for event in plugin['data'].today_events %}
              <div class="summary-event" style="color: #fff; display: flex; justify-content: flex-end; align-items: center; margin-bottom: 6px;">
                <span class="summary-title" style="margin-right: 8px;">{{ event.summary }}</span>
                <span class="summary-time" style="background: {{ event.color }}; color: #fff; padding: 2px 8px; border-radius: 4px; min-width: 3em;">{{ event.formatted_time }}</span>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
      {% if plugin['data'].tomorrow_events %}
        <div class="summary-section" style="width: 100%; margin-top: 18px;">
          <div class="summary-header" style="text-align: right; margin-bottom: 4px;"><hr></div>
          <div class="summary-events-col" style="display: flex; flex-direction: column; align-items: flex-end;">
            {% for event in plugin['data'].tomorrow_events %}
              <div class="summary-event" style="color: #fff; display: flex; justify-content: flex-end; align-items: center; margin-bottom: 6px;">
                <span class="summary-title" style="margin-right: 8px;">{{ event.summary }}</span>
                <span class="summary-time" style="background: {{ event.color }}; color: #fff; padding: 2px 8px; border-radius: 4px; min-width: 3em;">{{ event.formatted_time }}</span>
              </div>
            {% endfor %}
          </div>
        </div>
      {% endif %}
      {% if not plugin['data'].today_events and not plugin['data'].tomorrow_events %}
        <div style="color: #888;">Nėra artimiausių įvykių</div>
      {% endif %}
    </div>
  {% endif %}
{% else %}
  <div class="calendar-widget" style="color: red; padding: 20px;">Duomenų nėra</div>
{% endif %} 